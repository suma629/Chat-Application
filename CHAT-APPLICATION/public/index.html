

<!DOCTYPE html>
<html>
    <head>
        <title>Chat Room</title>
        <link rel="icon" href="images/favicon.png">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="css/style.css">
    </head>
    <body>
        <!--  -->
          
        <!--  -->
            <div class="container-fluid">
             <div class="row navbg">
                <img src="images/favicon.png" style="height: 42px;width: 40px; margin-top: 25px;margin-left: 20px;">
                <h1 class="title"> Chat Room </h1>
            </div>
        </div>
        

         <div class="bgimg">
           <div class="container">
           <div class="row">
               <div class="col-sm-3"></div>
               <div class="col-sm-6">
                   <div class="card" style=" height: 35rem ; margin-top: 60px; padding:30px">
                    <div style="font-size: 30px;color:chocolate;">
                       <div style="text-align:center">
                        <strong>New User !</strong>
                       </div>
                    </div> 
                    <div style="margin-bottom: 10px;">
                       <label style="font-size: 20px;color:chocolate;">Name</label>
                       <input class="form-control form-control-lg" name="username" type="text" id="name" placeholder="Username" required>
                    </div>
                    <div style="margin-bottom: 10px;">
                       <label style="font-size: 20px;color:chocolate;">Email</label>
                       <input class="form-control form-control-lg" name="Email" type="text" id="email" placeholder="Email" required>
                    </div>
                    <div style="margin-bottom: 10px;" >
                        <label style="font-size: 20px;color:chocolate;">Password</label>
                        <input class="form-control form-control-lg" name="Password" type="text" id="password" placeholder="Password" required>
                     </div>
                      <div style="text-align: center;">
                       <input type="submit" onclick="register()"></input>

                       <p id="demo"></p>
                      </div>
                    
                   <div style="font-size:20px;color:chocolate;text-align: center; padding-top: 10px;">
                    <p>Already have an account ?</p>
                    <a href="login.html"><h5>Login</h5></a>
                   </div>
                </div>
              
               </div>
               <div class="col-sm-3"></div>
            </div>
       </div>
      </div> 
       <script>
       function register()
       {
      //console.log('register in')
       let Name=document.querySelector('#name');
       let Email=document.querySelector('#email');
       let Password=document.querySelector('#password');

       
       let xhr=new XMLHttpRequest();
       let url="http://localhost:3000/api/user/register";
       xhr.open("POST",url,true);

       xhr.setRequestHeader("content-Type", "application/json");

       var data=JSON.stringify({
          "name": Name.value,
          "email": Email.value,
          "password":Password.value
       });
       xhr.send(data);
       
        xhr.onreadystatechange = function () {
            if(xhr.readyState === 4 ) {
                if(xhr.status === 200)
                {
                console.log("registered successfully");
                document.getElementById("demo").innerHTML="Registered Successfully!";
                  setTimeout(location.href="http://localhost:3000/login.html",3000);
                }
                else
                {
                console.log(this.responseText)
                document.getElementById("demo").innerHTML="Oops! "+this.responseText;
                }
            }
    }
   }
</script>
</body>
</html>
